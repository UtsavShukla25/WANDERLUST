<% layout("/layouts/boilerplate") %>
<div class="row mt-2">
   <div class="col-8 offset-3">
   <h3>Listing Details</h3>
   </div>
   <div class="card col-6 offset-3 show-card">
       <%
// compute image URL robustly: prefer listing.image.url, fallback to listing.image (string), else default
const imgUrl = (listing && listing.image && listing.image.url) ? listing.image.url
             : (listing && listing.image) ? listing.image
             : "https://images.unsplash.com/photo-1757331919176-eeb4e5ae173c?q=80&w=687&auto=format&fit=crop";
%>
<img src="<%= imgUrl %>" class="card-img-top show-img" alt="listing_image"/>

  <div class="card-body">
    <p class="card-text">
      <b><%= listing.title %></b> <br>
      <%= listing.description %> <br>
&#8377; <%= listing.price.toLocaleString("en-IN") %> <br>
<%= listing.location %> <br>
<%= listing.country %> <br>
      </p>
    </div>
   </div>
   
   <br/>
   

<div class="btns">
<a href="/listings/<%= listing._id %>/edit" class="btn btn-dark  offset-3 edit-btn">Edit</a>

         <form method="POST" action="/listings/<%= listing._id %>?_method=DELETE">
       <button class="btn btn-dark  offset-3">Delete</button>
          </form>
   </div>

</div>